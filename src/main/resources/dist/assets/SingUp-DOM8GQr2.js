import{r as i,u as f,j as s,L as g}from"./index-C9TKiR0q.js";import{T as v,a as n,i as N}from"./logo-2cFvjBA9.js";import"./CloseButton-Dk6N_CPr.js";function P(){const[d,c]=i.useState(""),[l,m]=i.useState(""),[h,x]=i.useState(""),[a,o]=i.useState([]),p=f(),u=async e=>{e.preventDefault();const r=e.currentTarget;if(!r.checkValidity()){e.stopPropagation(),r.classList.add("was-validated");return}if(!d||!l){o([...a,new Error("Email and password are required")]);return}if(l!==h){o([...a,new Error("Passwords do not match")]);return}const t=await fetch("http://localhost:8080/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:d,password:l}),credentials:"include"});if(t.ok){const{data:j}=await t.json();localStorage.setItem("data",JSON.stringify(j)),p("/")}else o([...a,new Error("Invalid email or password")])};return s.jsxs("section",{children:[s.jsx(v,{position:"top-end",className:"p-3",children:a.map((e,r)=>s.jsxs(n,{onClose:()=>{const t=[...a];t.splice(r,1),o(t)},delay:3e3,autohide:!0,children:[s.jsx(n.Header,{children:s.jsx("strong",{className:"me-auto",children:"Error"})}),s.jsx(n.Body,{children:e.message})]},r))}),s.jsx("div",{className:"container mt-5",children:s.jsx("div",{className:"row justify-content-center",children:s.jsx("div",{className:"col-12 col-sm-10 col-md-8 col-lg-6 col-xl-5 col-xxl-4",children:s.jsx("div",{className:"card border border-light-subtle rounded-3 shadow-sm",children:s.jsxs("div",{className:"card-body p-3 p-md-4 p-xl-5",children:[s.jsx("div",{className:"text-center mb-3",children:s.jsx("img",{src:N,alt:"Fidelitas logo",width:"90",height:"90"})}),s.jsx("h2",{className:"fs-6 fw-normal text-center text-secondary mb-4",children:"Create your account"}),s.jsx("form",{method:"post",className:"needs-validation",onSubmit:e=>u(e),noValidate:!0,children:s.jsxs("div",{className:"row gy-2",children:[s.jsx("div",{className:"col-12",children:s.jsxs("div",{className:"form-floating mb-3",children:[s.jsx("input",{type:"email",className:"form-control",id:"email",onChange:e=>c(e.target.value),required:!0}),s.jsx("label",{htmlFor:"email",children:"Email address"}),s.jsx("div",{className:"invalid-feedback",children:"Please enter a valid email address."})]})}),s.jsx("div",{className:"col-12",children:s.jsxs("div",{className:"form-floating mb-3",children:[s.jsx("input",{type:"password",className:"form-control",name:"password",id:"password",onChange:e=>m(e.target.value),required:!0}),s.jsx("label",{htmlFor:"password",children:"Password"}),s.jsx("div",{className:"invalid-feedback",children:"Please enter your password."})]})}),s.jsx("div",{className:"col-12",children:s.jsxs("div",{className:"form-floating mb-3",children:[s.jsx("input",{type:"password",className:"form-control",name:"confirmPassword",id:"confirmPassword",onChange:e=>x(e.target.value),required:!0}),s.jsx("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),s.jsx("div",{className:"invalid-feedback",children:"Please confirm your password."})]})}),s.jsx("div",{className:"col-12",children:s.jsx("div",{className:"d-grid my-3",children:s.jsx("button",{className:"btn btn-primary btn-lg",type:"submit",children:"Sign Up"})})}),s.jsx("div",{className:"col-12",children:s.jsxs("p",{className:"m-0 text-secondary text-center",children:["Already have an account?"," ",s.jsx(g,{to:"/login",className:"link-primary text-decoration-none",children:"Log In"})]})})]})})]})})})})})]})}export{P as default};
